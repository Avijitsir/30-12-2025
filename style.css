/* --- Base --- */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
    margin: 0; padding: 0; font-family: 'Roboto', sans-serif;
    background-color: #fff; height: 100vh; display: flex; flex-direction: column;
    overflow: hidden; user-select: none;
    overscroll-behavior-y: contain; touch-action: pan-x pan-y;
}

/* --- Full Screen Result Layout (NEW) --- */
.full-screen-result {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: #fff;
    z-index: 2000; /* Top of everything */
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* Compact Header for Result */
.res-header-pnl { 
    padding: 8px 10px; 
    background: #fff; 
    border-bottom: 1px solid #ddd; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
    flex-shrink: 0; 
}

/* Score Grid */
.score-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; text-align: center; margin-top: 5px; }
.s-item { display: flex; flex-direction: column; background: #f8f9fa; padding: 5px; border-radius: 4px; border: 1px solid #e0e0e0; }
.s-item .lbl { font-size: 10px; color: #666; text-transform: uppercase; }
.s-item .val { font-size: 14px; font-weight: 700; margin-top: 2px; }
.val.green { color: #26a745; } .val.red { color: #dc3545; } .val.gray { color: #6c757d; }

/* Filter Tabs & Palette */
.filter-tabs { display: flex; gap: 6px; margin-top: 8px; overflow-x: auto; padding-bottom: 2px; }
.f-btn { padding: 5px 12px; border: 1px solid #ddd; background: white; border-radius: 15px; font-size: 11px; cursor: pointer; white-space: nowrap; font-weight: 500; color: #555; }
.f-btn.active { background: #007bff; color: white; border-color: #007bff; }

.res-palette-scroll { display: flex; overflow-x: auto; gap: 6px; margin-top: 8px; padding-bottom: 4px; }
.rp-btn { min-width: 30px; height: 30px; display: flex; justify-content: center; align-items: center; border-radius: 50%; font-size: 12px; font-weight: bold; color: white; cursor: pointer; border: 1px solid transparent; flex-shrink: 0; }
.rp-btn.correct { background: #26a745; } .rp-btn.wrong { background: #dc3545; } .rp-btn.skipped { background: #ffc107; color: #333; }
.rp-btn.active { border: 2px solid #000; transform: scale(1.1); box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

/* --- Options Styling (High Visibility) --- */
.res-opt-row { 
    display: flex; align-items: flex-start; gap: 10px; padding: 12px; 
    border: 1px solid #eee; border-radius: 8px; margin-bottom: 8px; 
    background: #fff; pointer-events: none; 
}
.res-circle { 
    width: 20px; height: 20px; border: 2px solid #757575; border-radius: 50%; 
    margin-top: 2px; position: relative; flex-shrink: 0; 
}

/* Correct Answer (Green) */
.res-opt-row.correct-ans { 
    background: #d4edda !important; 
    border: 1px solid #28a745 !important; 
}
.res-opt-row.correct-ans .res-circle { 
    border-color: #28a745; background: #28a745; 
}
.res-opt-row.correct-ans .res-circle::after { 
    content: '✔'; position: absolute; top: 0px; left: 4px; 
    color: white; font-size: 12px; font-weight: bold; 
}

/* User Wrong Answer (Red) */
.res-opt-row.user-wrong { 
    background: #f8d7da !important; 
    border: 1px solid #dc3545 !important; 
}
.res-opt-row.user-wrong .res-circle { 
    border-color: #dc3545; background: #dc3545; 
}
.res-opt-row.user-wrong .res-circle::after { 
    content: '✖'; position: absolute; top: 0px; left: 5px; 
    color: white; font-size: 12px; font-weight: bold; 
}

/* Explanation & Content */
.res-content-area { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }
.res-status-badge { padding: 4px 10px; font-size: 11px; font-weight: bold; border-radius: 4px; color: white; text-transform: uppercase; }
.explanation-box { margin-top: 15px; padding: 12px; background: #e3f2fd; border-left: 4px solid #2196f3; border-radius: 4px; color: #0d47a1; font-size: 14px; line-height: 1.5; }

/* Image & Footer */
.q-img-display { max-width: 100%; max-height: 200px; display: block; margin: 10px auto; border-radius: 4px; border: 1px solid #eee; }
.passage-box { background: #fff8e1; border-left: 4px solid #ffc107; padding: 8px; margin-bottom: 10px; font-size: 14px; line-height: 1.5; color: #333; max-height: 120px; overflow-y: auto; }

/* Common Footer & Buttons */
.app-footer { position: fixed; bottom: 0; left: 0; width: 100%; background: white; border-top: 1px solid #e0e0e0; padding: 8px 10px; z-index: 10; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
.footer-row { display: flex; justify-content: space-between; gap: 8px; }
.tb-btn { border: 1px solid transparent; border-radius: 4px; padding: 10px 5px; font-size: 13px; font-weight: 600; cursor: pointer; text-align: center; white-space: nowrap; flex: 1; transition: all 0.2s; }
.tb-btn.review { background: #ffffff; color: #673ab7; border: 1px solid #673ab7; }
.tb-btn.clear { background: #ffffff; color: #444; border: 1px solid #999; flex: 0.8; }
.tb-btn.save { background: #00c696; color: white; border: 1px solid #00c696; flex: 1.5; }
.tb-btn.secondary { background: #e3f2fd; color: #000; border: 1px solid #bbdefb; }
.full-width { width: 100%; }

/* --- Instruction & Other Screens (Keep Existing) --- */
.inst-container { position: fixed; inset: 0; background: white; z-index: 500; display: flex; flex-direction: column; }
.inst-header { padding: 15px; border-bottom: 1px solid #ddd; background: #fff; display: flex; justify-content: space-between; align-items: center; }
.inst-content { flex: 1; overflow-y: auto; padding: 20px; font-size: 15px; line-height: 1.6; color: #222; }
.inst-footer { padding: 10px 15px; border-top: 1px solid #ddd; background: #f9f9f9; }
.app-header { height: 50px; background: white; border-bottom: 1px solid #e0e0e0; display: flex; justify-content: space-between; align-items: center; padding: 0 10px; }
.q-info-bar { padding: 8px 10px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f0f0f0; }
.q-num { font-weight: bold; font-size: 15px; color: #000; }
.q-meta { display: flex; align-items: center; gap: 10px; }
.marks-badge { font-size: 12px; display: flex; gap: 4px; }
.plus { background: #26a745; color: white; padding: 1px 4px; border-radius: 2px; }
.minus { background: #dc3545; color: white; padding: 1px 4px; border-radius: 2px; }
.content-area { flex: 1; overflow-y: auto; padding: 15px; position: relative; }
.option-row { display: flex; gap: 10px; align-items: flex-start; cursor: pointer; padding: 10px; border: 1px solid #eee; border-radius: 8px; background: #fff; transition: background 0.2s; }
.option-row.selected { border-color: #007bff; }
.option-row.selected .radio-circle { border-color: #007bff; }
.option-row.selected .radio-circle::after { content: ''; position: absolute; width: 10px; height: 10px; background: #007bff; border-radius: 50%; top: 3px; left: 3px; }
